{% extends "base.html" %}

{% block extra_css %}
<style>
/* Importar estilos do modal de contribuição */
@import url('/static/css/about.css');
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="faq-hero">
    <div class="hero-particles"></div>
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="hero-content text-center">
            <div class="hero-icon animate-bounce">
                <i class="fas fa-question-circle"></i>
            </div>
            <h1 class="hero-title animate-fade-up">Perguntas Frequentes</h1>
            <p class="hero-subtitle animate-fade-up-delayed">Respostas para as dúvidas mais comuns sobre nossos serviços e recursos</p>
        </div>
    </div>
</div>

<!-- FAQ Content -->
<div class="faq-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Search Box -->
                <div class="faq-search-container">
                    <div class="search-header">
                        <h3><i class="fas fa-search"></i> Encontre sua resposta</h3>
                        <p>Digite palavras-chave para filtrar as perguntas</p>
                    </div>
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="faq-search" placeholder="Ex: download, conta, categoria, problema..." class="search-input">
                        <button type="button" class="search-clear" id="search-clear" title="Limpar pesquisa">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="search-suggestions">
                        <span class="suggestion-label">Pesquisas populares:</span>
                        <button class="search-suggestion" data-search="download">Download</button>
                        <button class="search-suggestion" data-search="conta">Conta</button>
                        <button class="search-suggestion" data-search="gratuito">Gratuito</button>
                        <button class="search-suggestion" data-search="problema">Problema</button>
                    </div>
                </div>

                <div class="faq-container">
                    <div class="faq-item" data-category="downloads" data-keywords="recurso específico solicitar pedido">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-download"></i>
                                </div>
                                <h3>Como faço para solicitar um recurso específico?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-primary">Downloads</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <p>Para solicitar um recurso específico, você pode entrar em contato conosco através do formulário de contato ou enviar um e-mail diretamente para nossa equipe de suporte. Faremos o possível para localizar e disponibilizar o recurso solicitado o mais rapidamente possível.</p>
                                <div class="answer-actions">
                                    <a href="{{ url_for('contact') }}" class="answer-btn">
                                        <i class="fas fa-envelope"></i> Entrar em Contato
                                    </a>
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item" data-category="pricing" data-keywords="gratuito grátis preço custo pagar">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <h3>Os downloads são gratuitos?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-success">Gratuito</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <p>Oferecemos tanto recursos gratuitos quanto planos premium. Nosso objetivo é fornecer acesso a recursos de informática para profissionais e entusiastas, com diferentes níveis de serviço para atender suas necessidades.</p>
                                <div class="answer-highlight">
                                    <i class="fas fa-star"></i>
                                    <strong>Planos Flexíveis</strong> - Opções gratuitas e premium disponíveis
                                </div>
                                <div class="answer-actions">
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item" data-category="community" data-keywords="contribuir colaborar ajudar participar comunidade">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-hands-helping"></i>
                                </div>
                                <h3>Como posso contribuir com o site?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-warning">Comunidade</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <p>Há várias maneiras de contribuir com o Mundo da Informática. Você pode compartilhar recursos técnicos, enviar tutoriais, reportar links quebrados ou erros, ou até mesmo ajudar a divulgar o site para outros profissionais.</p>
                                <div class="contribution-ways">
                                    <div class="contrib-item">
                                        <i class="fas fa-share-alt"></i>
                                        <span>Compartilhar recursos</span>
                                    </div>
                                    <div class="contrib-item">
                                        <i class="fas fa-book"></i>
                                        <span>Enviar tutoriais</span>
                                    </div>
                                    <div class="contrib-item">
                                        <i class="fas fa-bug"></i>
                                        <span>Reportar problemas</span>
                                    </div>
                                </div>
                                <div class="answer-actions">
                                    <button class="answer-btn" id="openContributeModalFAQ">
                                        <i class="fas fa-handshake"></i> Quero Contribuir
                                    </button>
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item" data-category="navigation" data-keywords="categoria organização bios drivers software">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-layer-group"></i>
                                </div>
                                <h3>Como funciona o sistema de categorias?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-info">Navegação</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-sitemap"></i>
                                </div>
                                <p>Organizamos nosso conteúdo em categorias principais para facilitar a navegação e busca por conteúdo relevante.</p>
                                <div class="categories-grid">
                                    <a href="{{ url_for('category', category='BIOS') }}" class="category-item">
                                        <i class="fas fa-microchip"></i>
                                        <span>BIOS</span>
                                    </a>
                                    <a href="{{ url_for('category', category='Esquemas') }}" class="category-item">
                                        <i class="fas fa-project-diagram"></i>
                                        <span>Esquemas</span>
                                    </a>
                                    <a href="{{ url_for('category', category='Drivers') }}" class="category-item">
                                        <i class="fas fa-cog"></i>
                                        <span>Drivers</span>
                                    </a>
                                    <a href="{{ url_for('category', category='Softwares') }}" class="category-item">
                                        <i class="fas fa-desktop"></i>
                                        <span>Softwares</span>
                                    </a>
                                    <a href="{{ url_for('category', category='Impressoras') }}" class="category-item">
                                        <i class="fas fa-print"></i>
                                        <span>Impressoras</span>
                                    </a>
                                    <a href="{{ url_for('category', category='Cursos') }}" class="category-item">
                                        <i class="fas fa-graduation-cap"></i>
                                        <span>Cursos</span>
                                    </a>
                                </div>
                                <div class="answer-actions">
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item" data-category="account" data-keywords="conta cadastro registro login perfil">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <h3>Posso criar uma conta no site?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-secondary">Conta</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <p>Sim! Você pode criar uma conta gratuita para ter acesso a recursos adicionais e uma experiência mais personalizada.</p>
                                <div class="account-benefits">
                                    <div class="benefit-item">
                                        <i class="fas fa-history"></i>
                                        <span>Histórico de downloads</span>
                                    </div>
                                    <div class="benefit-item">
                                        <i class="fas fa-heart"></i>
                                        <span>Lista de favoritos</span>
                                    </div>
                                    <div class="benefit-item">
                                        <i class="fas fa-comments"></i>
                                        <span>Participar em discussões</span>
                                    </div>
                                </div>
                                <div class="answer-actions">
                                    <a href="{{ url_for('register') }}" class="answer-btn">
                                        <i class="fas fa-user-plus"></i> Criar Conta
                                    </a>
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="faq-item" data-category="support" data-keywords="problema bug erro link quebrado reportar suporte">
                        <div class="faq-question" onclick="toggleFAQ(this)">
                            <div class="question-content">
                                <div class="question-icon">
                                    <i class="fas fa-bug"></i>
                                </div>
                                <h3>Como posso reportar um problema ou link quebrado?</h3>
                                <div class="question-badge">
                                    <span class="badge badge-danger">Suporte</span>
                                </div>
                            </div>
                            <div class="faq-toggle">
                                <i class="fas fa-plus"></i>
                            </div>
                        </div>
                        <div class="faq-answer">
                            <div class="answer-content">
                                <div class="answer-icon">
                                    <i class="fas fa-tools"></i>
                                </div>
                                <p>Se você encontrar algum problema ou link quebrado, por favor entre em contato conosco. Sua ajuda é fundamental para mantermos a qualidade do nosso conteúdo.</p>
                                <div class="report-steps">
                                    <div class="step-item">
                                        <div class="step-number">1</div>
                                        <div class="step-text">Acesse a página de contato</div>
                                    </div>
                                    <div class="step-item">
                                        <div class="step-number">2</div>
                                        <div class="step-text">Descreva o problema encontrado</div>
                                    </div>
                                    <div class="step-item">
                                        <div class="step-number">3</div>
                                        <div class="step-text">Aguarde nossa resposta</div>
                                    </div>
                                </div>
                                <div class="answer-actions">
                                    <a href="{{ url_for('contact') }}" class="answer-btn">
                                        <i class="fas fa-exclamation-triangle"></i> Reportar Problema
                                    </a>
                                    <button class="answer-helpful" onclick="markHelpful(this)">
                                        <i class="fas fa-thumbs-up"></i> Útil
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CTA Section -->
                <div class="faq-cta">
                    <div class="cta-content">
                        <div class="cta-background-pattern"></div>
                        <div class="cta-icon pulse-animation">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h4>Não encontrou sua resposta?</h4>
                        <p>Nossa equipe de suporte está sempre pronta para ajudá-lo!</p>
                        <div class="cta-buttons">
                            <a href="{{ url_for('contact') }}" class="btn btn-gradient primary">
                                <i class="fas fa-envelope"></i> Entrar em Contato
                            </a>
                            <a href="#" onclick="openLiveChat()" class="btn btn-gradient secondary">
                                <i class="fas fa-comments"></i> Chat Online
                            </a>
                        </div>
                        <div class="cta-footer">
                            <p class="text-center">Você também pode nos encontrar nas redes sociais para dúvidas rápidas!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Contribuição -->
<div id="contributeModal" class="contribute-modal">
    <div class="contribute-modal-overlay"></div>
    <div class="contribute-modal-content">
        <button class="contribute-modal-close" id="closeContributeModal">
            <i class="fas fa-times"></i>
        </button>

        <div class="contribute-modal-header">
            <div class="contribute-modal-icon">
                <i class="fas fa-heart"></i>
            </div>
            <h2>Como Você Pode Contribuir</h2>
            <p>Existem várias formas de ajudar a comunidade a crescer!</p>
        </div>

        <div class="contribute-modal-body">
            <div class="contribute-option">
                <div class="contribute-option-icon">
                    <i class="fas fa-share-alt"></i>
                </div>
                <div class="contribute-option-content">
                    <h3>Compartilhe Conhecimento</h3>
                    <p>Compartilhe recursos, tutoriais e experiências com a comunidade. Seu conhecimento pode ajudar outros profissionais!</p>
                    <ul>
                        <li><i class="fas fa-check"></i> Publique recursos técnicos</li>
                        <li><i class="fas fa-check"></i> Compartilhe suas experiências</li>
                        <li><i class="fas fa-check"></i> Ajude outros usuários</li>
                    </ul>
                </div>
            </div>

            <div class="contribute-option">
                <div class="contribute-option-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="contribute-option-content">
                    <h3>Participe da Comunidade</h3>
                    <p>Engaje-se com outros membros, participe de discussões e ajude a construir uma comunidade mais forte.</p>
                    <ul>
                        <li><i class="fas fa-check"></i> Responda dúvidas nos comentários</li>
                        <li><i class="fas fa-check"></i> Compartilhe nas redes sociais</li>
                        <li><i class="fas fa-check"></i> Dê feedback sobre recursos</li>
                    </ul>
                </div>
            </div>

            <div class="contribute-option">
                <div class="contribute-option-icon">
                    <i class="fas fa-code"></i>
                </div>
                <div class="contribute-option-content">
                    <h3>Contribua com Conteúdo</h3>
                    <p>Envie BIOS, drivers, esquemas e softwares que possam beneficiar outros profissionais da área.</p>
                    <ul>
                        <li><i class="fas fa-check"></i> Arquivos de BIOS atualizados</li>
                        <li><i class="fas fa-check"></i> Drivers e firmwares</li>
                        <li><i class="fas fa-check"></i> Esquemas técnicos</li>
                    </ul>
                </div>
            </div>

            <div class="contribute-option highlight">
                <div class="contribute-option-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <div class="contribute-option-content">
                    <h3>Apoio Financeiro (Opcional)</h3>
                    <p>Se desejar, você pode apoiar financeiramente para nos ajudar a manter e melhorar a plataforma.</p>
                    <ul>
                        <li><i class="fas fa-check"></i> Assinatura Premium ou VIP</li>
                        <li><i class="fas fa-check"></i> Doações pontuais</li>
                        <li><i class="fas fa-check"></i> Patrocínio de recursos</li>
                    </ul>
                    <div class="contribute-cta-buttons">
                        <a href="{{ url_for('plans') }}" class="btn btn-gradient primary">
                            <i class="fas fa-crown"></i> Ver Planos
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="contribute-modal-footer">
            <p><i class="fas fa-info-circle"></i> Qualquer forma de contribuição é valiosa e muito apreciada!</p>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
// FAQ Fallback Script - Ensures FAQ works even if main script fails
(function() {
    'use strict';

    // Debug logging
    console.log('FAQ fallback script loaded');

    // Simple FAQ toggle function
    function initFAQFallback() {
        console.log('Initializing FAQ fallback');

        // Remove any existing event listeners and reset state
        const faqItems = document.querySelectorAll('.faq-item');
        console.log('Found FAQ items:', faqItems.length);

        faqItems.forEach(function(item, index) {
            console.log('Processing FAQ item', index);

            // Reset state
            item.classList.remove('active');
            const answer = item.querySelector('.faq-answer');
            const icon = item.querySelector('.faq-toggle i');

            if (answer) {
                answer.style.maxHeight = '0';
                answer.style.opacity = '0';
            }

            if (icon) {
                icon.className = 'fas fa-plus';
            }

            // Add click handler to question
            const question = item.querySelector('.faq-question');
            if (question) {
                // Remove existing onclick to prevent conflicts
                question.removeAttribute('onclick');

                // Add new event listener
                question.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    console.log('FAQ question clicked:', index);

                    const isActive = item.classList.contains('active');

                    // Close all other items
                    faqItems.forEach(function(otherItem) {
                        if (otherItem !== item) {
                            otherItem.classList.remove('active');
                            const otherAnswer = otherItem.querySelector('.faq-answer');
                            const otherIcon = otherItem.querySelector('.faq-toggle i');

                            if (otherAnswer) {
                                otherAnswer.style.maxHeight = '0';
                                otherAnswer.style.opacity = '0';
                            }

                            if (otherIcon) {
                                otherIcon.className = 'fas fa-plus';
                            }
                        }
                    });

                    // Toggle current item
                    if (isActive) {
                        // Close current item
                        item.classList.remove('active');
                        if (answer) {
                            answer.style.maxHeight = '0';
                            answer.style.opacity = '0';
                        }
                        if (icon) {
                            icon.className = 'fas fa-plus';
                        }
                        console.log('FAQ item closed');
                    } else {
                        // Open current item
                        item.classList.add('active');
                        if (answer) {
                            answer.style.maxHeight = '2000px';
                            answer.style.opacity = '1';
                        }
                        if (icon) {
                            icon.className = 'fas fa-minus';
                        }
                        console.log('FAQ item opened');
                    }
                });

                console.log('Event listener added to FAQ item', index);
            }
        });

        console.log('FAQ fallback initialization complete');
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initFAQFallback);
    } else {
        initFAQFallback();
    }

    // Also initialize on window load as backup
    window.addEventListener('load', function() {
        setTimeout(initFAQFallback, 500);
    });

    console.log('FAQ fallback script setup complete');
})();
</script>

<!-- Modal de Contribuição Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('contributeModal');
    const openBtn = document.getElementById('openContributeModalFAQ');
    const closeBtn = document.getElementById('closeContributeModal');
    const overlay = modal?.querySelector('.contribute-modal-overlay');

    function openModal() {
        if (modal) {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
    }

    function closeModal() {
        if (modal) {
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
    }

    if (openBtn) {
        openBtn.addEventListener('click', openModal);
    }

    if (closeBtn) {
        closeBtn.addEventListener('click', closeModal);
    }

    if (overlay) {
        overlay.addEventListener('click', closeModal);
    }

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal?.classList.contains('active')) {
            closeModal();
        }
    });

    // Restaurar scroll quando clicar em links dentro do modal
    if (modal) {
        const modalLinks = modal.querySelectorAll('a[href]');
        modalLinks.forEach(link => {
            link.addEventListener('click', function() {
                // Restaurar scroll antes da navegação
                document.body.style.overflow = '';
            });
        });
    }
});
</script>
{% endblock %}
